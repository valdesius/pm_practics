# Use Cases — VasyokLibraryBot

## Акторы
- Пользователь (через Telegram)
- Внешний источник метаданных книг (провайдеры, парсинг/HTTP)

## UC1. Старт / Онбординг
Цель: создать профиль, показать помощь.
Основной сценарий:
1) /start
2) бот создаёт пользователя (если новый)
   - пользователь уже существует → просто показать меню
3) показывает меню/команды

## UC2. Добавить книгу по ISBN (ввод текстом)
Цель: добавить книгу по ISBN-13.
Основной сценарий:
1) пользователь вводит ISBN
2) бот валидирует ISBN
    - неверный ISBN → сообщение об ошибке
3) бот получает метаданные у провайдера
    - провайдер не нашёл → предложить ручной ввод (UC4)
4) бот проверяет дубликаты
    - есть дубликат → показать карточку книги
5) сохраняет книгу в БД
6) показывает карточку книги

## UC3. Добавить книгу по фото (распознавание ISBN)
Цель: добавить книгу по фото/скану обложки/штрихкода.
Основной сценарий:
1) пользователь отправляет фото
2) бот распознаёт ISBN (OCR/детектор)
   - ISBN не распознан → предложить повтор/ручной ввод
3) бот валидирует ISBN
   - неверный ISBN → сообщение об ошибке
4) бот получает метаданные у провайдера
   - провайдер не нашёл → предложить ручной ввод (UC4)
5) бот проверяет дубликаты
   - есть дубликат → показать карточку книги
6) сохраняет книгу в БД
7) показывает карточку книги

## UC4. Добавить книгу вручную (без ISBN)
Цель: добавить книгу по названию/автору/году вручную.
Сценарий:
1) пользователь вводит поля
2) бот предлагает предпросмотр
   если ничего не нашел → уведомить пользователя 
3) проверяет похожие (дубликаты)
   - есть дубликат → показать карточку книги
4) сохраняет книгу
5) показывает карточку книги

## UC5. Просмотр карточки книги
Цель: открыть подробности книги.
Сценарий:
1) пользователь выбирает книгу из списка/поиска
2) бот читает данные из БД
3) показывает карточку + действия (статус/редактировать/удалить)

## UC6. Поиск по библиотеке
Цель: найти книги по строке (название/автор/теги).
Сценарий:
1) пользователь вводит запрос
2) бот выполняет поиск в БД
3) показывает результаты

## UC7. Список библиотеки (фильтры/пагинация)
Цель: показать книги списком.
Сценарий:
1) пользователь выбирает “Моя библиотека”
2) бот показывает список (страницами)
3) фильтры: статус/теги/сортировка

## UC8. Редактирование книги
Цель: изменить поля книги (название, автор, теги, заметки).
Сценарий:
1) выбрать книгу
2) ввести изменения
3) сохранить

## UC9. Удаление книги
Цель: удалить запись.
Сценарий:
1) выбрать книгу → “Удалить”
2) подтверждение
3) пометить удалённой/удалить из БД

## UC10. Смена статуса чтения
Цель: “хочу / читаю / прочитал”.
Сценарий:
1) выбрать книгу
2) выбрать статус
3) сохранить и показать обновлённую карточку

## UC11. Рекомендации
Цель: порекомендовать книгу на основе истории/жанров/популярности.
Сценарий:
1) пользователь нажимает “Рекомендации”
2) бот читает профиль и библиотеку
3) формирует список рекомендаций
   - если не может составить → уведомить пользователя
4) показывает список

## UC12. Экспорт библиотеки (CSV/JSON)
Цель: выгрузка коллекции.
Сценарий:
1) пользователь выбирает формат
2) бот формирует файл
3) отправляет файл
