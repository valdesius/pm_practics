# Фаза 4 (Мета) — Прогнозирование сроков Фазы 5 (Монте‑Карло)

Цель: спрогнозировать срок выполнения **Фазы 5** методом Монте‑Карло двумя путями и оценить срок с **80% достоверностью (P80)**.

---

## 1) Входные данные: задачи Фазы 5 и трёхточечные оценки (O/M/P), часы

Фаза 5 разбита на **22 задачи**. Для каждой задачи задана трёхточечная оценка времени выполнения:
- **O** — оптимистичная (optimistic)
- **M** — наиболее вероятная (most likely)
- **P** — пессимистичная (pessimistic)

| ID | Задача | O | M | P |
|------|--------|---:|---:|---:|
| P5-01 | Согласовать состав задач и критерий успеха | 1.0 | 1.5 | 2.0 |
| P5-02 | Определить роли/специализации ресурсов | 1.5 | 2.5 | 4.0 |
| P5-03 | Сформировать WBS (20–25 задач) | 2.0 | 3.5 | 5.5 |
| P5-04 | Ресурсные требования по каждой задаче | 3.0 | 5.0 | 8.0 |
| P5-05 | Зависимости (предшествование) | 3.0 | 5.0 | 8.0 |
| P5-06 | Сетевой граф: связность/циклы | 2.0 | 3.5 | 6.0 |
| P5-07 | Длительности задач: PERT-таблица | 3.0 | 5.0 | 8.0 |
| P5-08 | Подготовить входной формат под предоставленный код | 1.5 | 2.5 | 4.0 |
| P5-09 | Прогон эвристики LPT | 1.0 | 2.0 | 3.5 |
| P5-10 | Прогоны SLK/FREE/LST/LFT | 2.0 | 3.0 | 5.0 |
| P5-11 | 5–10 случайных приоритетов + прогоны | 2.0 | 3.0 | 5.5 |
| P5-12 | Сравнение решений и выбор лучшего | 1.5 | 2.5 | 4.5 |
| P5-13 | Проверка корректности ресурсных ограничений | 1.5 | 2.5 | 4.5 |
| P5-14 | “Натянуть” на 40-часовую неделю (сроки) | 1.0 | 2.0 | 3.5 |
| P5-15 | Сроки этапов проекта | 1.5 | 2.5 | 4.5 |
| P5-16 | Допущения (график, доступность и т.д.) | 1.0 | 2.0 | 3.0 |
| P5-17 | План (Gantt таблично/картинкой) | 2.0 | 3.5 | 6.0 |
| P5-18 | Риски и буферы | 1.5 | 2.5 | 4.5 |
| P5-19 | Обновить RACI для фазы 5 | 1.0 | 2.0 | 3.5 |
| P5-20 | Оформление результата (md/единый стиль) | 2.0 | 3.5 | 6.0 |
| P5-21 | Внутреннее ревью | 1.0 | 1.5 | 2.5 |
| P5-22 | Финальный митинг + сдача | 1.0 | 1.5 | 2.5 |

---

## 2) История прошлых недель → дискретные распределения

Ниже приведена история прошлых недель (пример данных для демонстрации метода; при наличии трекера/логов заменить на фактические значения команды).

### 2.1 Наблюдения: “сколько задач закрыли за неделю” (для модели 1)

| Неделя | Закрыто задач |
|---|---:|
| W-5 | 4 |
| W-4 | 5 |
| W-3 | 6 |
| W-2 | 5 |
| W-1 | 7 |

**Замечание про моделирование:** в расчётной программе для демонстрации использовано **слегка сглаженное/скорректированное** распределение задач/нед, близкое к наблюдениям (ниже). Это сделано, чтобы модель была менее “ступенчатой” на малом числе недель и чтобы продемонстрировать работу Монте‑Карло.

### 2.2 Дискретное распределение “задач/неделю” (модель 1)

Поддержка распределения (количество задач/неделю):
- 4, 5, 6, 7

Вероятности (как в расчётной программе):
- 4: 0.20
- 5: 0.35
- 6: 0.30
- 7: 0.15

### 2.3 Наблюдения: “сколько человеко‑часов выделяли в неделю” (для модели 2)

| Неделя | Часов на предмет (суммарно по команде) |
|---|---:|
| W-5 | 10 |
| W-4 | 12 |
| W-3 | 14 |
| W-2 | 12 |
| W-1 | 8 |

**Замечание про моделирование:** в расчётной программе для демонстрации использовано более “гладкое” распределение часов/нед с 5 значениями (8/10/12/14/16), чтобы учесть возможные колебания доступности времени.

### 2.4 Дискретное распределение “часы/неделю” (модель 2)

Поддержка распределения (часов/неделю):
- 8, 10, 12, 14, 16

Вероятности (как в расчётной программе):
- 8: 0.10
- 10: 0.20
- 12: 0.40
- 14: 0.20
- 16: 0.10

---

## 3) Модель 1 (Монте‑Карло): “сколько задач выполняем за неделю”

### Идея модели
Считаем, что все задачи одинаковые по “размеру”.  
В каждой итерации симуляции по неделям сэмплируется число выполненных задач из распределения “задач/нед”, пока не будет выполнено **N = 22** задач.

### Параметры симуляции
- N задач Фазы 5: **22**
- Итераций: **30 000**

### Результаты (вывод программы)
- Среднее: **4.4865 недели**
- P80: **5.0 недель**
- min/max: **4 .. 6 недель**

---

## 4) Модель 2 (Монте‑Карло): “часы/нед + треугольные длительности задач”

### Идея модели
Модель учитывает два источника неопределённости:
1) что задачи имеют разную длительность (и неопределённость)
2) что доступные часы команды по неделям “плавают”

В каждой итерации:
- для каждой задачи `P5-xx` сэмплируется длительность `Ti ~ Triangular(Oi, Mi, Pi)` (в часах)
- суммируется общий объём `T_total = sum(Ti)`
- затем имитируются недели: сэмплируем доступные часы `H_week` из распределения “часы/нед” и “вырабатываем” объём, пока `sum(H_week) >= T_total`

### Параметры симуляции
- Часы/нед: дискретное распределение из п.2.4
- Длительности задач: треугольное распределение по O/M/P из п.1
- Итераций: **30 000**

### Результаты (вывод программы)
- Среднее: **6.181466666666667 недели**
- P80: **7.0 недель**
- min/max: **4 .. 8 недель**

---

## 5) Сравнение моделей и объяснение различий

### Итог по P80
- Модель 1: **P80 = 5 недель**
- Модель 2: **P80 = 7 недель**
- Разница P80: **+2 недели** (модель 2 более консервативна)

### Почему модель 2 даёт больший срок
- Модель 1 не различает “тяжёлые” и “лёгкие” задачи — задача считается одинаковой единицей прогресса.
- Модель 2 учитывает вариативность: треугольные длительности задач (O/M/P) + нестабильные часы в неделю, что увеличивает “хвост” распределения и поднимает P80.
- Поэтому модель 2 лучше отражает риск того, что часть недель будет малопродуктивной или часть задач окажется ближе к пессимистичной оценке.
